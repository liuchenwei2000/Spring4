## 使用远程服务 ##

如果应用需要和其他系统进行交互，远程访问它们的服务，作为 Java 应用，一般有下面几种可以使用的远程调用技术：

* 远程方法调用（RMI:Remote Method Invocation）
* Caucho 的 Hessian 和 Burlap
* Spring 基于 HTTP 的远程服务
* 使用 JAX-RPC 和 JAX-WS 的 WebService

不管选择哪种远程调用技术，Spring 为使用这几种不同的技术访问和创建远程服务都提供了广泛的支持。

### 远程调用概览

远程调用是客户端应用和服务端之间的会话。在客户端，它所需要的一些功能并不在该应用的实现范围之内，所以应用要向能提供这些功能的其他系统寻求帮助。而远程应用通过远程服务暴露这些功能。

会话开始于客户端应用的一个远程过程调用（RPC:Remote Procedure Call）。从表面上看，RPC 类似于调用一个本地对象的一个方法，这两者都是同步操作，会阻塞调用代码的执行，直到被调用的过程执行完毕。

本地方法调用是指同一个应用中的两个代码块之间的执行流交环，RPC调用就是执行流从一个应用传递给另一个应用，理论上另一个应用部署在跨网络的一台远程机器上。

				Spring 通过多种远程调用技术支持 RPC

		RPC 模型                        适用场景
	RMI（远程方法调用）				不考虑网络限制（如防火墙）时，访问/发布基于 Java 的服务
	Hessian 或 Burlap			考虑网络限制时，通过 HTTP 访问/发布基于 Java 的服务，Hessian 是二进制协议，Burlap 是基于 XML
	HTTP invoker				考虑网络限制时，并希望使用基于 XML 或专有的序列化机制实现 Java 序列化时，访问/发布基于 Spring 的服务
	JAX-RPC 和 JAX-WS			访问/发布平台独立的、基于 SOAP 的 Web 服务

### Spring 的支持

在所有的模型中，服务都作为 Spring 所管理的 bean 配置在应用中。这是通过一个代理工厂 bean 实现的，这个 bean 能够把远程服务像本地对象一样装配到其他 bean 的属性中去。

客户端向代理发起调用，就像代理提供了这些服务一样。代理代表客户端与远程服务进行通信，由它负责处理连接的细节并向远程服务发起调用。更重要的是，如果调用远程服务时发生 RemoteException，代理会处理此异常并重新抛出非受查异常 RemoteAccessException。

在服务器端，可以使用上面列出的任意一种 RPC 模型（使用 Spring 的远程导出器 Remote Exporter）将 Spring 管理的 bean 发布为远程服务。

在 Spring 中，使用远程服务纯粹是一个配置问题，不需要编写任何 Java 代码就可以支持远程调用。服务 Bean 也不需要关心它们是否参与了一个 RPC。当然，任何传递给远程调用的 bean 或从远程调用返回的 bean 可能需要实现 java.io.Serilalizable 接口。